<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>咨询</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#9aa6b2;--white:#f8fafc}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#061021 0%, #071428 60%);color:var(--white)}
    .card{width:100%;max-width:460px;padding:28px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter:blur(6px)}
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:18px;margin:0}
    p.lead{margin:6px 0 18px;color:var(--muted);font-size:13px}
    form{display:grid;gap:12px}
    .input-wrap{display:flex;gap:8px}
    input[type="tel"]{flex:1;padding:14px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--white);outline:none;font-size:15px}
    .hint{font-size:12px;color:var(--muted)}
    button.submit{background:linear-gradient(90deg,var(--accent),#7c3aed);border:none;padding:12px;border-radius:10px;color:#042027;font-weight:600;font-size:15px;cursor:pointer}
    button.submit:disabled{opacity:0.6;cursor:not-allowed}
    .row{display:flex;justify-content:space-between;align-items:center;margin-top:6px}
    .success{display:none;padding:12px;border-radius:8px;background:linear-gradient(90deg,#052024,#06323a);color:#9ff0ea;font-weight:600}
    .error{color:#ffb4b4;font-size:13px}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:12px}
    @media (max-width:480px){.card{padding:20px;border-radius:12px}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <div class="brand">
      <div class="logo">咨询</div>
      <div>
        <h1>客户咨询留言</h1>
        <p class="lead">留下您的联系方式，我们的法务团队会联系您</p>
      </div>
    </div>

    <form id="leadForm" autocomplete="off">
      <label for="phone" class="hint">手机号/微信号</label>
      <div class="input-wrap">
        <input id="phone" name="phone" type="tel" placeholder="请输入您的手机号" inputmode="tel" required pattern="^1\d{10}$" />
        <button class="submit" id="submitBtn" type="submit">提交</button>
      </div>
      <div class="row">
        <div class="hint">已严格加密。</div>
        <div id="msg" class="error" aria-live="polite"></div>
      </div>
    </form>

    <div id="success" class="success" role="status">提交成功 — 我们的法务团队会联系您，请保持手机畅通。</div>

    <footer>© 奇点工作室 | 版权所有</footer>
  </div>

  <script>
    const form = document.getElementById('leadForm');
    const phone = document.getElementById('phone');
    const msg = document.getElementById('msg');
    const success = document.getElementById('success');
    const submitBtn = document.getElementById('submitBtn');

    function validatePhone(v){
      return /^1\d{10}$/.test(v.trim());
    }

    form.addEventListener('submit', async e => {
      e.preventDefault();
      msg.textContent = '';
      success.style.display = 'none';
      const v = phone.value || '';
      if(!validatePhone(v)){
        msg.textContent = '请输入合法的 11 位手机号';
        phone.focus();
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = '提交中...';

      try{
        // 将下面的 URL 改为你的后端接收地址
        const resp = await fetch('/api/lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phone: v })
        });

        if(resp.ok){
          success.style.display = 'block';
          // 复制手机号到剪贴板（方便人工处理）
          try{ await navigator.clipboard.writeText(v); }catch(e){}
          form.reset();
        }else{
          const text = await resp.text();
          msg.textContent = text || '提交失败，请稍后重试';
        }
      }catch(err){
        msg.textContent = '网络异常，请检查连接';
      }finally{
        submitBtn.disabled = false;
        submitBtn.textContent = '提交';
      }
    });

    // Enter 提交支持
    phone.addEventListener('keypress', e => {
      if(e.key === 'Enter') e.preventDefault();
    });
  </script>
</body>
</html>
